!function e(t,n,o){function i(r,u){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!u&&s)return s(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){(function(t){"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof n?"undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null:jQuery)}(function(t){var n=e("./widgets/Booking"),o=e("./widgets/Signup");t.fn.copaairBooking=function(e){return this.each(function(){t.data(this,"plugin_copaairBooking")||t.data(this,"plugin_copaairBooking",new n(this,e))})},t.fn.copaairSignup=function(e){return this.each(function(){t.data(this,"plugin_copaairSignup")||t.data(this,"plugin_copaairSignup",new o(this,e))})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./widgets/Booking":11,"./widgets/Signup":12}],2:[function(e,t){(function(n){__browserify_shim_require__=e,function(e,t,n,o,i){"use strict";!function(t){function n(){try{return u in t&&t[u]}catch(e){return!1}}var i,a={},r=t.document,u="localStorage",s="script";if(a.disabled=!1,a.version="1.3.17",a.set=function(){},a.get=function(){},a.has=function(e){return void 0!==a.get(e)},a.remove=function(){},a.clear=function(){},a.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var o=a.get(e,t);n(o),a.set(e,o)},a.getAll=function(){},a.forEach=function(){},a.serialize=function(e){return JSON.stringify(e)},a.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},n())i=t[u],a.set=function(e,t){return void 0===t?a.remove(e):(i.setItem(e,a.serialize(t)),t)},a.get=function(e,t){var n=a.deserialize(i.getItem(e));return void 0===n?t:n},a.remove=function(e){i.removeItem(e)},a.clear=function(){i.clear()},a.getAll=function(){var e={};return a.forEach(function(t,n){e[t]=n}),e},a.forEach=function(e){for(var t=0;t<i.length;t++){var n=i.key(t);e(n,a.get(n))}};else if(r.documentElement.addBehavior){var l,c,d,f;!function(){var e=function(e){return e.replace(/^d/,"___$&").replace(f,"___")};try{c=new ActiveXObject("htmlfile"),c.open(),c.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),c.close(),l=c.w.frames[0].document,i=l.createElement("div")}catch(t){i=r.createElement("div"),l=r.body}d=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(i),l.appendChild(i),i.addBehavior("#default#userData"),i.load(u);var n=e.apply(a,t);return l.removeChild(i),n}},f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),a.set=d(function(t,n,o){return n=e(n),void 0===o?a.remove(n):(t.setAttribute(n,a.serialize(o)),t.save(u),o)}),a.get=d(function(t,n,o){n=e(n);var i=a.deserialize(t.getAttribute(n));return void 0===i?o:i}),a.remove=d(function(t,n){n=e(n),t.removeAttribute(n),t.save(u)}),a.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(u);for(var n,o=0;n=t[o];o++)e.removeAttribute(n.name);e.save(u)}),a.getAll=function(){var e={};return a.forEach(function(t,n){e[t]=n}),e},a.forEach=d(function(e,t){for(var n,o=e.XMLDocument.documentElement.attributes,i=0;n=o[i];++i)t(n.name,a.deserialize(e.getAttribute(n.name)))})}()}try{var p="__storejs__";a.set(p,p),a.get(p)!=p&&(a.disabled=!0),a.remove(p)}catch(g){a.disabled=!0}a.enabled=!a.disabled,"undefined"!=typeof e&&e.exports&&this.module!==e?e.exports=a:"function"==typeof o&&o.amd?o(a):t.store=a}(Function("return this")()),i("undefined"!=typeof store?store:window.store)}.call(n,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t){t.exports={es:{form:{origin:"Desde",destination:"Hacia",departure:"Salida","return":"Regreso",economic:"Clase Económica",business:"Clase Ejecutiva",submit:"Ver Vuelos",adults:"Adultos",children:"Niños",infants:"Infantes"},messages:{notification:"Por favor completa todos los campos.",error:"Por favor completa todos los campos."}},en:{form:{origin:"From",destination:"To",departure:"Departure","return":"Return",economic:"Business Class",business:"Economy Class",submit:"Find flights",adults:"Adults",children:"Children",infants:"Infants"},messages:{notification:"Please complete all the ...",error:"Please complete all the ..."}},pt:{form:{origin:"De",destination:"Para",departure:"Saída","return":"Regresso",economic:"Classe econômica",business:"Classe Executiva",submit:"Buscar voos",adults:"Adultos",children:"Crianças",infants:"Bebês"},messages:{notification:"Por favor completa todos los campos.",error:"Por favor completa todos los campos."}}}},{}],4:[function(e,t){t.exports={es:{regional:{closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun','jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles','jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","juv","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}},en:{regional:{}},pt:{regional:{closeText:"Fechar",prevText:"&#x3C;Anterior",nextText:"Próximo&#x3E;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira','Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}}}},{}],5:[function(e,t){t.exports={es:{form:{fname:"Nombre",lname:"Apellido",email:"Email",country:"País",city:"Ciudad",phone:"Móvil",subscribe:"Subscribirse"}},en:{form:{fname:"Name",lname:"Last Name",email:"Email",country:"Country",city:"City",phone:"Mobile",subscribe:"Subscribe"}},pt:{form:{fname:"Nome",lname:"Sobrenome",email:"E-mail",country:"País",city:"Cidade",phone:"Celular",subscribe:"Inscrever-se"}}}},{}],6:[function(e,t){(function(n){"use strict";var o=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("./FlightControl"),u=function(){function e(t){i(this,e);var n={delay:0,lang:"es",minLength:0};this.options=a.extend({},n,t)}return o(e,null,{start:{value:function(e){var t=this,n=new r({lang:this.options.lang});n.fetch("destinations",function(n){t.options.source=t.format(n.list),"function"==typeof e&&e()})},writable:!0,configurable:!0},render:{value:function(e){var t=a(e).hide(),n=t.attr("class"),o=t.val(),i=t.attr("placeholder"),r=a("<input />").val(o).attr("type","text").attr("placeholder",i);return r.autocomplete(this.options),r.on("focus",function(){var e=a(this);console.log("ht"),0===e.val().length&&e.autocomplete("search")}),r.addClass(n).addClass("ui-widget  ui-widget-content  ui-state-default"),r.insertAfter(t),r.autocomplete("instance")._renderItem=function(e,t){return a("<li>").append(t.label).appendTo(e)},a.ui.autocomplete.filter=function(e,t){var n=new RegExp("\\b"+a.ui.autocomplete.escapeRegex(t),"i");return a.grep(e,function(e){return n.test(e.label||e.value||e)})},this},writable:!0,configurable:!0},format:{value:function(e){var t=this,n=[];return a.each(e,function(e,o){var i="<b>"+o.name[t.options.lang]+", "+o.country+'</b>\n                    <span class="code"> | '+o.id+"</span>",a=o.id,r=o.name[t.options.lang]+", "+o.id;n.push({label:i,value:a,display:r})}),n},writable:!0,configurable:!0}}),e}();t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./FlightControl":9}],7:[function(e,t){(function(e){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,a={lang:"es",origin:!1,destination:!1,inputs:{tripType:"RT",flexibleSearch:"true",pos:"CMGS","guestTypes[0].type":"ADT","guestTypes[1].type":"CNN","guestTypes[2].type":"INF","guestTypes[0].amount":1,"guestTypes[1].amount":0,"guestTypes[2].amount":0,"outboundOption.departureDay":null,"outboundOption.departureMonth":null,"outboundOption.departureYear":null,"inboundOption.departureDay":null,"inboundOption.departureMonth":null,"inboundOption.departureYear":null,coupon:null,"outboundOption.originLocationCode":null,"inboundOption.destinationLocationCode":null,"outboundOption.destinationLocationCode":null,"inboundOption.originLocationCode":null,cabinClass:"Economy",d1:null,lang:"es"},formUrl:"https://bookings.copaair.com/CMGS/AirLowFareSearchExternal.do?"},r=function(){function e(t){o(this,e),this.options=i.extend({},a,t),this._defaults=a,this.setDefaultBounds()}return n(e,null,{process:{value:function(){},writable:!0,configurable:!0},setDefaultBounds:{value:function(){this.options.origin&&this.setBounds("origin",this.options.origin),this.options.destination&&this.setBounds("destination",this.options.destination)},writable:!0,configurable:!0},setBounds:{value:function(e,t){"origin"===e&&(this.options.inputs["outboundOption.destinationLocationCode"]=t,this.options.inputs["inboundOption.destinationLocationCode"]=t),"destination"===e&&(this.options.inputs["outboundOption.originLocationCode"]=t,this.options.inputs["inboundOption.originLocationCode"]=t)},writable:!0,configurable:!0},setDates:{value:function(){},writable:!0,configurable:!0}}),e}();t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t){(function(n){"use strict";var o=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../../../lang/datepicker.json"),u={departureSelector:".copaair-booking-datepicker-departure",returnSelector:".copaair-booking-datepicker-return",dateRules:{today:new Date,weekLater:new Date((new Date).getTime()+6048e5)},lang:"es"},s=function(){function e(t){i(this,e),this.options=a.extend({},u,t),this._defaults=u}return o(e,null,{render:{value:function(){this.setDefaultDates(),this.setLocale()},writable:!0,configurable:!0},setDefaultDates:{value:function(){var e=this.options.dateRules,t=a(this.options.departureSelector),n=a(this.options.returnSelector);t.datepicker({minDate:new Date}),n.datepicker({minDate:new Date}),t.datepicker("setDate",e.today),n.datepicker("setDate",e.weekLater)},writable:!0,configurable:!0},setLocale:{value:function(){var e=r[this.options.lang].regional;a.datepicker.setDefaults(e)},writable:!0,configurable:!0}}),e}();t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../lang/datepicker.json":4}],9:[function(e,t){(function(n){"use strict";var o=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null;e("store-js");var r={lang:"es",api:{destinations:"https://flightcontrol.io/api/routes/destinations",countries:"https://flightcontrol.io/api/routes/countries",regions:"https://flightcontrol.io/api/routes/regions"},storageExpiration:864e5,storage:!0},u={set:function(e,t,n){store.set(e,{val:t,exp:n,time:(new Date).getTime()})},get:function(e){var t=store.get(e);return t?(new Date).getTime()-t.time>t.exp?null:t.val:null}},s=function(){function e(t){i(this,e),this.options=a.extend({},r,t),this._defaults=r,store.enabled||(console.log("browser not supported or in private mode"),this.options.storage=!1)}return o(e,null,{fetch:{value:function(e,t){var n=this,o={};return this.options.storage&&u.get(e)&&u.get(e+".count")?(o.list=u.get(e),o.count=u.get(e+".count"),t(o)):void a.getJSON(this.options.api[e],function(i){n.sortNames(i),n.options.storage&&(u.set(e,i,n.options.storageExpiration),u.set(e+".count",i.length,n.options.storageExpiration)),o.list=i,o.count=i.length,t(o)})},writable:!0,configurable:!0},sortNames:{value:function(e){e.sort(function(e,t){return e.name[lang]>t.name[lang]?1:e.name[lang]<t.name[lang]?-1:0})},writable:!0,configurable:!0}}),e}();t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"store-js":2}],10:[function(e,t){(function(n){"use strict";var o=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r="undefined"!=typeof window?window.Handlebars:"undefined"!=typeof n?n.Handlebars:null,u={booking:e("../../../lang/booking.json"),signup:e("../../../lang/signup.json")},s={lang:"es",src:"bower_components/copaair-widgets/templates",callback:function(){}},l=function(){function e(t,n){var o=this;i(this,e),this.options=a.extend({},s,n),"undefined"!=typeof r&&null!==r?a.ajax({url:""+this.options.src+"/"+t+".hbs",success:function(e){var n=o.compile(t,e);o.options.callback(n)}}):console.error("This plugin requires Handlebars.js")}return o(e,null,{compile:{value:function(e,t){var n=r.compile(t),o=n(u[e][this.options.lang]);return o},writable:!0,configurable:!0}}),e}();t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../lang/booking.json":3,"../../../lang/signup.json":5}],11:[function(e,t){(function(n){"use strict";var o=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../lib/Template"),u=(e("../lib/FlightControl"),e("../lib/Datepicker")),s=e("../lib/Autocomplete"),l=e("../lib/Book"),c={lang:"es",origin:"all",destination:"all",templatePath:"bower_components/copaair-widgets/templates/booking.hbs",languagePath:"bower_components/copaair-widgets/lang/"},d={allDestinations:"https://copaapi.nbxapps.com/destinations/",countryDestinations:"https://copaapi.nbxapps.com/destinations/?country="},f=function(){function e(t,n){var o=this;i(this,e),this.$booking=a(t),this.options=a.extend({},c,n),this._defaults=c,new r("booking",{lang:this.options.lang,callback:function(e){o.$booking.html(e),o.setupSelectMenus();var t=new u;t.render(),o.initAutocomplete(),o.setFormValues(t),o.datepickerFormEvents(t);new l}})}return o(e,null,{initAutocomplete:{value:function(){var e=new s({lang:this.options.lang,select:function(e,t){console.log(e.target,t.item.display),console.log(t.item),a(e.target).attr("value",t.item.display)},position:{my:"left bottom",at:"left top"}});e.start(function(){a(".js-booking-autocomplete").each(function(){e.render(this)})})},writable:!0,configurable:!0},setupSelectMenus:{value:function(){return a(".js-selectmenu").selectmenu(),this},writable:!0,configurable:!0},fetchDestinations:{value:function(e){var t=this,n=d.allDestinations,o=this.options.lang;return this.destinations=[],a.getJSON(n,function(n){n.sort(function(e,t){return e.name[o]>t.name[o]?1:e.name[o]<t.name[o]?-1:0});var i=[];a.each(n,function(e,t){var n="<b>"+t.name[o]+", "+t.country+'</b><span class="code"> | '+t.id+"</span>",a=t.id,r=t.name[o]+", "+t.id;i.push({label:n,value:a,display:r})}),t.destinations=i,"function"==typeof e&&e()}),this},writable:!0,configurable:!0},bookingEvents:{value:function(){var e=a(".copaair-booking");this.submitForm(e)},writable:!0,configurable:!0},setFormValues:{value:function(e){var t=this.$booking,n=a(e.options.departureSelector).datepicker("getDate"),o=a(e.options.returnSelector).datepicker("getDate");t.find('input[name="inboundOption.departureDay"]').attr("value",o.getUTCDate()),t.find('input[name="inboundOption.departureMonth"]').attr("value",o.getMonth()+1),t.find('input[name="inboundOption.departureYear"]').attr("value",o.getFullYear()),t.find('input[name="outboundOption.departureDay"]').attr("value",n.getUTCDate()),t.find('input[name="outboundOption.departureMonth"]').attr("value",n.getMonth()+1),t.find('input[name="outboundOption.departureYear"]').attr("value",n.getFullYear())},writable:!0,configurable:!0},datepickerFormEvents:{value:function(e){var t=a(e.options.departureSelector),n=a(e.options.returnSelector),o=this.$booking,i=function(e,t){var i=new Date(t.selectedYear,t.selectedMonth,t.selectedDay),a=new Date(i.getTime()+6048e5);n.datepicker("setDate",a),o.find('input[name="inboundOption.departureDay"]').attr("value",a.getUTCDate()),o.find('input[name="inboundOption.departureMonth"]').attr("value",a.getMonth()+1),o.find('input[name="inboundOption.departureYear"]').attr("value",a.getFullYear()),n.datepicker("option","minDate",i),o.find('input[name="outboundOption.departureDay"]').attr("value",t.selectedDay),o.find('input[name="outboundOption.departureMonth"]').attr("value",t.selectedMonth+1),o.find('input[name="outboundOption.departureYear"]').attr("value",t.selectedYear)},r=function(e,t){o.find('input[name="inboundOption.departureDay"]').attr("value",t.selectedDay),o.find('input[name="inboundOption.departureMonth"]').attr("value",t.selectedMonth+1),o.find('input[name="inboundOption.departureYear"]').attr("value",t.selectedYear)};t.datepicker("option","onSelect",i),n.datepicker("option","onSelect",r)},writable:!0,configurable:!0},submitForm:{value:function(e){var t=this;e.on("submit",function(n){n.preventDefault();var o=a(this).serialize(),i=t.options.formUrl;if(t.validationError(e))console.log("error in the form");else{var r=window.open(i+o,"_blank");r.focus()}})},writable:!0,configurable:!0}}),e}();t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/Autocomplete":6,"../lib/Book":7,"../lib/Datepicker":8,"../lib/FlightControl":9,"../lib/Template":10}],12:[function(e,t){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=e("../lib/Template"),i=function a(e,t){var i=this;n(this,a),this.$form=$(e);var r={lang:"es"};this.options=$.extend({},r,t),new o("signup",{lang:this.options.lang,callback:function(e){i.$form.html(e)}})};t.exports=i},{"../lib/Template":10}]},{},[1]);
//# sourceMappingURL=copaair-widgets.min.js.map